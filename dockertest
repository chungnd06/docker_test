# Builder image chungnd06/node:10-builder 
FROM node:10-alpine 
 
WORKDIR /app 
 
RUN apk --no-cache add \ 
    g++ make python git \ 
    && yarn global add node-gyp \ 
    && rm -rf /var/cache/apk/* 
 
ONBUILD ADD package.json yarn.lock /app/ 
ONBUILD RUN yarn --pure-lockfile 
# Runtime image chungnd06/node:10-runtime 
FROM node:10-alpine 
 
EXPOSE 3000 
WORKDIR /app 
 
ONBUILD COPY --from=builder /app . 
ONBUILD ADD . /app 
ONBUILD RUN yarn build 
 
CMD ["yarn", "docker:start"] 
# Project image 
FROM chungnd06/node:10-builder AS builder 
 
FROM chungnd06/node:10-runtime
